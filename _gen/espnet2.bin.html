<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>espnet2.bin package &mdash; ESPnet 202205 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="espnet2.main_funcs package" href="espnet2.main_funcs.html" />
    <link rel="prev" title="espnet2.lm package" href="espnet2.lm.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> ESPnet
          </a>
              <div class="version">
                202205
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p><span class="caption-text">Tutorial:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallelization.html">Using Job scheduling system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">Docker</a></li>
</ul>
<p><span class="caption-text">ESPnet2:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../espnet2_tutorial.html">ESPnet2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../espnet2_tutorial.html#instruction-for-run-sh">Instruction for run.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../espnet2_training_option.html">Change the configuration for training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../espnet2_task.html">Task class and data input system for training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../espnet2_distributed.html">Distributed training</a></li>
</ul>
<p><span class="caption-text">Notebook:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebook/asr_cli.html">Speech Recognition (Recipe)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/asr_library.html">Speech Recognition (Library)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_asr_realtime_demo.html">ESPnet2-ASR realtime demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_asr_transfer_learning_demo.html"><strong>Use transfer learning for ASR in ESPnet2</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_asr_transfer_learning_demo.html#Abstract">Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_asr_transfer_learning_demo.html#ESPnet-installation-(about-10-minutes-in-total)">ESPnet installation (about 10 minutes in total)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_asr_transfer_learning_demo.html#mini_an4-recipe-as-a-transfer-learning-example">mini_an4 recipe as a transfer learning example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_streaming_asr_demo.html">ESPnet2 real streaming Transformer demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_tts_realtime_demo.html">ESPnet2-TTS realtime demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_tutorial_2021_CMU_11751_18781.html">CMU 11751/18781 2021: ESPnet Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_tutorial_2021_CMU_11751_18781.html#Run-an-inference-example">Run an inference example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_tutorial_2021_CMU_11751_18781.html#Full-installation">Full installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet2_tutorial_2021_CMU_11751_18781.html#Run-a-recipe-example">Run a recipe example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet_se_demonstration_for_waspaa_2021.html">ESPnet Speech Enhancement Demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet_se_demonstration_for_waspaa_2021.html#Contents">Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet_se_demonstration_for_waspaa_2021.html#(1)-Tutorials-on-the-Basic-Usage">(1) Tutorials on the Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/espnet_se_demonstration_for_waspaa_2021.html#(2)-Tutorials-on-Contributing-to-ESPNet-SE-Project">(2) Tutorials on Contributing to ESPNet-SE Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/pretrained.html">Pretrained Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/se_demo.html">ESPnet Speech Enhancement Demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/st_demo.html">ESPnet Speech Translation Demonstration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/tts_cli.html">Text-to-Speech (Recipe)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/tts_realtime_demo.html">ESPnet real time E2E-TTS demonstration</a></li>
</ul>
<p><span class="caption-text">Package Reference:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="espnet.utils.html">espnet.utils package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.st.html">espnet.st package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.vc.html">espnet.vc package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.lm.html">espnet.lm package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.transform.html">espnet.transform package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.bin.html">espnet.bin package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.mt.html">espnet.mt package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.scheduler.html">espnet.scheduler package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.optimizer.html">espnet.optimizer package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.nets.html">espnet.nets package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.tts.html">espnet.tts package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet.asr.html">espnet.asr package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.utils.html">espnet2.utils package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.st.html">espnet2.st package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.optimizers.html">espnet2.optimizers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.layers.html">espnet2.layers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.iterators.html">espnet2.iterators package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.tasks.html">espnet2.tasks package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.lm.html">espnet2.lm package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">espnet2.bin package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-asr-align">espnet2.bin.asr_align</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-asr-inference-streaming">espnet2.bin.asr_inference_streaming</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-split-scps">espnet2.bin.split_scps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-gan-tts-train">espnet2.bin.gan_tts_train</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-diar-inference">espnet2.bin.diar_inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-enh-scoring">espnet2.bin.enh_scoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-lm-calc-perplexity">espnet2.bin.lm_calc_perplexity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-diar-train">espnet2.bin.diar_train</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-enh-train">espnet2.bin.enh_train</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-asr-inference-maskctc">espnet2.bin.asr_inference_maskctc</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-st-inference-streaming">espnet2.bin.st_inference_streaming</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-asr-train">espnet2.bin.asr_train</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-st-train">espnet2.bin.st_train</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-enh-s2t-train">espnet2.bin.enh_s2t_train</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-tts-inference">espnet2.bin.tts_inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-lm-train">espnet2.bin.lm_train</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-asr-inference-k2">espnet2.bin.asr_inference_k2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-aggregate-stats-dirs">espnet2.bin.aggregate_stats_dirs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-mt-inference">espnet2.bin.mt_inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-pack">espnet2.bin.pack</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-enh-inference">espnet2.bin.enh_inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-init">espnet2.bin.__init__</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-tts-train">espnet2.bin.tts_train</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-asr-inference">espnet2.bin.asr_inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-tokenize-text">espnet2.bin.tokenize_text</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-hubert-train">espnet2.bin.hubert_train</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-mt-train">espnet2.bin.mt_train</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-launch">espnet2.bin.launch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#espnet2-bin-st-inference">espnet2.bin.st_inference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.main_funcs.html">espnet2.main_funcs package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.fileio.html">espnet2.fileio package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.samplers.html">espnet2.samplers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.gan_tts.html">espnet2.gan_tts package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.mt.html">espnet2.mt package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.hubert.html">espnet2.hubert package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.schedulers.html">espnet2.schedulers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.enh.html">espnet2.enh package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.diar.html">espnet2.diar package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.torch_utils.html">espnet2.torch_utils package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.fst.html">espnet2.fst package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.tts.html">espnet2.tts package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.asr.html">espnet2.asr package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.text.html">espnet2.text package</a></li>
<li class="toctree-l1"><a class="reference internal" href="espnet2.train.html">espnet2.train package</a></li>
</ul>
<p><span class="caption-text">Tool Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apis/espnet_bin.html">core tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apis/espnet2_bin.html">core tools (espnet2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apis/utils_py.html">python utility tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apis/utils_sh.html">bash utility tools</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ESPnet</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>espnet2.bin package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_gen/espnet2.bin.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="espnet2-bin-package">
<h1>espnet2.bin package<a class="headerlink" href="#espnet2-bin-package" title="Permalink to this headline">¶</a></h1>
<section id="espnet2-bin-asr-align">
<span id="id1"></span><h2>espnet2.bin.asr_align<a class="headerlink" href="#espnet2-bin-asr-align" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.asr_align"></span><p>Perform CTC segmentation to align utterances within audio files.</p>
<dl class="class">
<dt id="espnet2.bin.asr_align.CTCSegmentation">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.asr_align.</code><code class="sig-name descname">CTCSegmentation</code><span class="sig-paren">(</span><em class="sig-param">asr_train_config: Union[pathlib.Path, str], asr_model_file: Union[pathlib.Path, str] = None, fs: int = 16000, ngpu: int = 0, batch_size: int = 1, dtype: str = 'float32', kaldi_style_text: bool = True, text_converter: str = 'tokenize', time_stamps: str = 'auto', **ctc_segmentation_args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_align.html#CTCSegmentation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Align text to audio using CTC segmentation.</p>
<dl class="simple">
<dt>Usage:</dt><dd><p>Initialize with given ASR model and parameters.
If needed, parameters for CTC segmentation can be set with <code class="docutils literal notranslate"><span class="pre">set_config(·)</span></code>.
Then call the instance as function to align text within an audio file.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># example file included in the ESPnet repository</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">soundfile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speech</span><span class="p">,</span> <span class="n">fs</span> <span class="o">=</span> <span class="n">soundfile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;test_utils/ctc_align_test.wav&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># load an ASR model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">espnet_model_zoo.downloader</span> <span class="kn">import</span> <span class="n">ModelDownloader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">ModelDownloader</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wsjmodel</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">download_and_unpack</span><span class="p">(</span> <span class="s2">&quot;kamo-naoyuki/wsj&quot;</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Apply CTC segmentation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aligner</span> <span class="o">=</span> <span class="n">CTCSegmentation</span><span class="p">(</span> <span class="o">**</span><span class="n">wsjmodel</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">text</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;utt1 THE SALE OF THE HOTELS&quot;</span><span class="p">,</span> <span class="s2">&quot;utt2 ON PROPERTY MANAGEMENT&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aligner</span><span class="o">.</span><span class="n">set_config</span><span class="p">(</span> <span class="n">gratis_blank</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">segments</span> <span class="o">=</span> <span class="n">aligner</span><span class="p">(</span> <span class="n">speech</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">fs</span><span class="o">=</span><span class="n">fs</span> <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span> <span class="n">segments</span> <span class="p">)</span>
<span class="go">utt1 utt 0.27 1.72 -0.1663 THE SALE OF THE HOTELS</span>
<span class="go">utt2 utt 4.54 6.10 -4.9646 ON PROPERTY MANAGEMENT</span>
</pre></div>
</div>
<dl class="simple">
<dt>On multiprocessing:</dt><dd><p>To parallelize the computation with multiprocessing, these three steps
can be separated:
(1) <code class="docutils literal notranslate"><span class="pre">get_lpz</span></code>: obtain the lpz,
(2) <code class="docutils literal notranslate"><span class="pre">prepare_segmentation_task</span></code>: prepare the task, and
(3) <code class="docutils literal notranslate"><span class="pre">get_segments</span></code>: perform CTC segmentation.
Note that the function <cite>get_segments</cite> is a staticmethod and therefore
independent of an already initialized CTCSegmentation object.</p>
</dd>
</dl>
<p class="rubric">References</p>
<p>CTC-Segmentation of Large Corpora for German End-to-end Speech Recognition
2020, Kürzinger, Winkelbauer, Li, Watzel, Rigoll
<a class="reference external" href="https://arxiv.org/abs/2007.09127">https://arxiv.org/abs/2007.09127</a></p>
<p>More parameters are described in <a class="reference external" href="https://github.com/lumaku/ctc-segmentation">https://github.com/lumaku/ctc-segmentation</a></p>
<p>Initialize the CTCSegmentation module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asr_train_config</strong> – ASR model config file (yaml).</p></li>
<li><p><strong>asr_model_file</strong> – ASR model file (pth).</p></li>
<li><p><strong>fs</strong> – Sample rate of audio file.</p></li>
<li><p><strong>ngpu</strong> – Number of GPUs. Set 0 for processing on CPU, set to 1 for
processing on GPU. Multi-GPU aligning is currently not
implemented. Default: 0.</p></li>
<li><p><strong>batch_size</strong> – Currently, only batch size == 1 is implemented.</p></li>
<li><p><strong>dtype</strong> – Data type used for inference. Set dtype according to
the ASR model.</p></li>
<li><p><strong>kaldi_style_text</strong> – A kaldi-style text file includes the name of the
utterance at the start of the line. If True, the utterance name
is expected as first word at each line. If False, utterance
names are automatically generated. Set this option according to
your input data. Default: True.</p></li>
<li><p><strong>text_converter</strong> – How CTC segmentation handles text.
“tokenize”: Use ESPnet 2 preprocessing to tokenize the text.
“classic”: The text is preprocessed as in ESPnet 1 which takes
token length into account. If the ASR model has longer tokens,
this option may yield better results. Default: “tokenize”.</p></li>
<li><p><strong>time_stamps</strong> – Choose the method how the time stamps are
calculated. While “fixed” and “auto” use both the sample rate,
the ratio of samples to one frame is either automatically
determined for each inference or fixed at a certain ratio that
is initially determined by the module, but can be changed via
the parameter <code class="docutils literal notranslate"><span class="pre">samples_to_frames_ratio</span></code>. Recommended for
longer audio files: “auto”.</p></li>
<li><p><strong>**ctc_segmentation_args</strong> – Parameters for CTC segmentation.</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentation.choices_text_converter">
<code class="sig-name descname">choices_text_converter</code><em class="property"> = ['tokenize', 'classic']</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.choices_text_converter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentation.choices_time_stamps">
<code class="sig-name descname">choices_time_stamps</code><em class="property"> = ['auto', 'fixed']</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.choices_time_stamps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentation.config">
<code class="sig-name descname">config</code><em class="property"> = CtcSegmentationParameters( )</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.bin.asr_align.CTCSegmentation.estimate_samples_to_frames_ratio">
<code class="sig-name descname">estimate_samples_to_frames_ratio</code><span class="sig-paren">(</span><em class="sig-param">speech_len=215040</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_align.html#CTCSegmentation.estimate_samples_to_frames_ratio"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.estimate_samples_to_frames_ratio" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the ratio of encoded frames to sample points.</p>
<p>This method helps to determine the time a single encoded frame occupies.
As the sample rate already gave the number of samples, only the ratio
of samples per encoded CTC frame are needed. This function estimates them by
doing one inference, which is only needed once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>speech_len</strong> – Length of randomly generated speech vector for single
inference. Default: 215040.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Estimated ratio.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>samples_to_frames_ratio</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentation.fs">
<code class="sig-name descname">fs</code><em class="property"> = 16000</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.fs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.bin.asr_align.CTCSegmentation.get_lpz">
<code class="sig-name descname">get_lpz</code><span class="sig-paren">(</span><em class="sig-param">speech: Union[torch.Tensor, numpy.ndarray]</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_align.html#CTCSegmentation.get_lpz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.get_lpz" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain CTC posterior log probabilities for given speech data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>speech</strong> – Speech audio input.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Numpy vector with CTC log posterior probabilities.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>lpz</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="espnet2.bin.asr_align.CTCSegmentation.get_segments">
<em class="property">static </em><code class="sig-name descname">get_segments</code><span class="sig-paren">(</span><em class="sig-param">task: espnet2.bin.asr_align.CTCSegmentationTask</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_align.html#CTCSegmentation.get_segments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.get_segments" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain segments for given utterance texts and CTC log posteriors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> – CTCSegmentationTask object that contains ground truth and
CTC posterior probabilities.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Dictionary with alignments. Combine this with the task</dt><dd><p>object to obtain a human-readable segments representation.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>result</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="espnet2.bin.asr_align.CTCSegmentation.get_timing_config">
<code class="sig-name descname">get_timing_config</code><span class="sig-paren">(</span><em class="sig-param">speech_len=None</em>, <em class="sig-param">lpz_len=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_align.html#CTCSegmentation.get_timing_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.get_timing_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain parameters to determine time stamps.</p>
</dd></dl>

<dl class="method">
<dt id="espnet2.bin.asr_align.CTCSegmentation.prepare_segmentation_task">
<code class="sig-name descname">prepare_segmentation_task</code><span class="sig-paren">(</span><em class="sig-param">text</em>, <em class="sig-param">lpz</em>, <em class="sig-param">name=None</em>, <em class="sig-param">speech_len=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_align.html#CTCSegmentation.prepare_segmentation_task"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.prepare_segmentation_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Preprocess text, and gather text and lpz into a task object.</p>
<p>Text is pre-processed and tokenized depending on configuration.
If <code class="docutils literal notranslate"><span class="pre">speech_len</span></code> is given, the timing configuration is updated.
Text, lpz, and configuration is collected in a CTCSegmentationTask
object. The resulting object can be serialized and passed in a
multiprocessing computation.</p>
<p>A minimal amount of text processing is done, i.e., splitting the
utterances in <code class="docutils literal notranslate"><span class="pre">text</span></code> into a list and applying <code class="docutils literal notranslate"><span class="pre">text_cleaner</span></code>.
It is recommended that you normalize the text beforehand, e.g.,
change numbers into their spoken equivalent word, remove special
characters, and convert UTF-8 characters to chars corresponding to
your ASR model dictionary.</p>
<p>The text is tokenized based on the <code class="docutils literal notranslate"><span class="pre">text_converter</span></code> setting:</p>
<p>The “tokenize” method is more efficient and the easiest for models
based on latin or cyrillic script that only contain the main chars,
[“a”, “b”, …] or for Japanese or Chinese ASR models with ~3000
short Kanji / Hanzi tokens.</p>
<p>The “classic” method improves the the accuracy of the alignments
for models that contain longer tokens, but with a greater complexity
for computation. The function scans for partial tokens which may
improve time resolution.
For example, the word “▁really” will be broken down into
<code class="docutils literal notranslate"><span class="pre">['▁',</span> <span class="pre">'▁r',</span> <span class="pre">'▁re',</span> <span class="pre">'▁real',</span> <span class="pre">'▁really']</span></code>. The alignment will be
based on the most probable activation sequence given by the network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> – List or multiline-string with utterance ground truths.</p></li>
<li><p><strong>lpz</strong> – Log CTC posterior probabilities obtained from the CTC-network;
numpy array shaped as ( &lt;time steps&gt;, &lt;classes&gt; ).</p></li>
<li><p><strong>name</strong> – Audio file name. Choose a unique name, or the original audio
file name, to distinguish multiple audio files. Default: None.</p></li>
<li><p><strong>speech_len</strong> – Number of sample points. If given, the timing
configuration is automatically derived from length of fs, length
of speech and length of lpz. If None is given, make sure the
timing parameters are correct, see time_stamps for reference!
Default: None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>CTCSegmentationTask object that can be passed to</dt><dd><p><code class="docutils literal notranslate"><span class="pre">get_segments()</span></code> in order to obtain alignments.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>task</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentation.samples_to_frames_ratio">
<code class="sig-name descname">samples_to_frames_ratio</code><em class="property"> = None</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.samples_to_frames_ratio" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.bin.asr_align.CTCSegmentation.set_config">
<code class="sig-name descname">set_config</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_align.html#CTCSegmentation.set_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.set_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Set CTC segmentation parameters.</p>
<dl>
<dt>Parameters for timing:</dt><dd><dl class="simple">
<dt>time_stamps: Select method how CTC index duration is estimated, and</dt><dd><p>thus how the time stamps are calculated.</p>
</dd>
</dl>
<p>fs: Sample rate.
samples_to_frames_ratio: If you want to directly determine the</p>
<blockquote>
<div><p>ratio of samples to CTC frames, set this parameter, and
set <code class="docutils literal notranslate"><span class="pre">time_stamps</span></code> to “fixed”.
Note: If you want to calculate the time stamps as in
ESPnet 1, set this parameter to:
<code class="docutils literal notranslate"><span class="pre">subsampling_factor</span> <span class="pre">*</span> <span class="pre">frame_duration</span> <span class="pre">/</span> <span class="pre">1000</span></code>.</p>
</div></blockquote>
</dd>
<dt>Parameters for text preparation:</dt><dd><p>set_blank: Index of blank in token list. Default: 0.
replace_spaces_with_blanks: Inserts blanks between words, which is</p>
<blockquote>
<div><p>useful for handling long pauses between words. Only used in
<code class="docutils literal notranslate"><span class="pre">text_converter=&quot;classic&quot;</span></code> preprocessing mode. Default: False.</p>
</div></blockquote>
<dl class="simple">
<dt>kaldi_style_text: Determines whether the utterance name is expected</dt><dd><p>as fist word of the utterance. Set at module initialization.</p>
</dd>
<dt>text_converter: How CTC segmentation handles text.</dt><dd><p>Set at module initialization.</p>
</dd>
</dl>
</dd>
<dt>Parameters for alignment:</dt><dd><dl class="simple">
<dt>min_window_size: Minimum number of frames considered for a single</dt><dd><p>utterance. The current default value of 8000 corresponds to
roughly 4 minutes (depending on ASR model) and should be OK in
most cases. If your utterances are further apart, increase
this value, or decrease it for smaller audio files.</p>
</dd>
<dt>max_window_size: Maximum window size. It should not be necessary</dt><dd><p>to change this value.</p>
</dd>
<dt>gratis_blank: If True, the transition cost of blank is set to zero.</dt><dd><p>Useful for long preambles or if there are large unrelated segments
between utterances. Default: False.</p>
</dd>
</dl>
</dd>
<dt>Parameters for calculation of confidence score:</dt><dd><dl class="simple">
<dt>scoring_length: Block length to calculate confidence score. The</dt><dd><p>default value of 30 should be OK in most cases.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentation.text_converter">
<code class="sig-name descname">text_converter</code><em class="property"> = 'tokenize'</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.text_converter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentation.time_stamps">
<code class="sig-name descname">time_stamps</code><em class="property"> = 'auto'</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.time_stamps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentation.warned_about_misconfiguration">
<code class="sig-name descname">warned_about_misconfiguration</code><em class="property"> = False</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentation.warned_about_misconfiguration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.asr_align.</code><code class="sig-name descname">CTCSegmentationTask</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_align.html#CTCSegmentationTask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Task object for CTC segmentation.</p>
<p>When formatted with str(·), this object returns
results in a kaldi-style segments file formatting.
The human-readable output can be configured with
the printing options.</p>
<dl>
<dt>Properties:</dt><dd><dl class="simple">
<dt>text: Utterance texts, separated by line. But without the utterance</dt><dd><p>name at the beginning of the line (as in kaldi-style text).</p>
</dd>
</dl>
<p>ground_truth_mat: Ground truth matrix (CTC segmentation).
utt_begin_indices: Utterance separator for the Ground truth matrix.
timings: Time marks of the corresponding chars.
state_list: Estimated alignment of chars/tokens.
segments: Calculated segments as: (start, end, confidence score).
config: CTC Segmentation configuration object.
name: Name of aligned audio file (Optional). If given, name is</p>
<blockquote>
<div><p>considered when generating the text.</p>
</div></blockquote>
<dl class="simple">
<dt>utt_ids: The list of utterance names (Optional). This list should</dt><dd><p>have the same length as the number of utterances.</p>
</dd>
</dl>
<p>lpz: CTC posterior log probabilities (Optional).</p>
</dd>
<dt>Properties for printing:</dt><dd><p>print_confidence_score: Includes the confidence score.
print_utterance_text: Includes utterance text.</p>
</dd>
</dl>
<p>Initialize the module.</p>
<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.char_probs">
<code class="sig-name descname">char_probs</code><em class="property"> = None</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.char_probs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.config">
<code class="sig-name descname">config</code><em class="property"> = None</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.done">
<code class="sig-name descname">done</code><em class="property"> = False</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.done" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.ground_truth_mat">
<code class="sig-name descname">ground_truth_mat</code><em class="property"> = None</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.ground_truth_mat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.lpz">
<code class="sig-name descname">lpz</code><em class="property"> = None</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.lpz" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.name">
<code class="sig-name descname">name</code><em class="property"> = 'utt'</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.print_confidence_score">
<code class="sig-name descname">print_confidence_score</code><em class="property"> = True</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.print_confidence_score" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.print_utterance_text">
<code class="sig-name descname">print_utterance_text</code><em class="property"> = True</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.print_utterance_text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.segments">
<code class="sig-name descname">segments</code><em class="property"> = None</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.segments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.set">
<code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_align.html#CTCSegmentationTask.set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Update properties.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – Key-value dict that contains all properties
with their new values. Unknown properties are ignored.</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.state_list">
<code class="sig-name descname">state_list</code><em class="property"> = None</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.state_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.text">
<code class="sig-name descname">text</code><em class="property"> = None</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.timings">
<code class="sig-name descname">timings</code><em class="property"> = None</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.timings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.utt_begin_indices">
<code class="sig-name descname">utt_begin_indices</code><em class="property"> = None</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.utt_begin_indices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.asr_align.CTCSegmentationTask.utt_ids">
<code class="sig-name descname">utt_ids</code><em class="property"> = None</em><a class="headerlink" href="#espnet2.bin.asr_align.CTCSegmentationTask.utt_ids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="espnet2.bin.asr_align.ctc_align">
<code class="sig-prename descclassname">espnet2.bin.asr_align.</code><code class="sig-name descname">ctc_align</code><span class="sig-paren">(</span><em class="sig-param">log_level: Union[int, str], asr_train_config: str, asr_model_file: str, audio: pathlib.Path, text: TextIO, output: TextIO, print_utt_text: bool = True, print_utt_score: bool = True, **kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_align.html#ctc_align"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_align.ctc_align" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide the scripting interface to align text to audio.</p>
</dd></dl>

<dl class="function">
<dt id="espnet2.bin.asr_align.get_parser">
<code class="sig-prename descclassname">espnet2.bin.asr_align.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_align.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_align.get_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain an argument-parser for the script interface.</p>
</dd></dl>

<dl class="function">
<dt id="espnet2.bin.asr_align.main">
<code class="sig-prename descclassname">espnet2.bin.asr_align.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_align.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_align.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse arguments and start the alignment in ctc_align(·).</p>
</dd></dl>

</section>
<section id="espnet2-bin-asr-inference-streaming">
<span id="id2"></span><h2>espnet2.bin.asr_inference_streaming<a class="headerlink" href="#espnet2-bin-asr-inference-streaming" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.asr_inference_streaming"></span><dl class="class">
<dt id="espnet2.bin.asr_inference_streaming.Speech2TextStreaming">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.asr_inference_streaming.</code><code class="sig-name descname">Speech2TextStreaming</code><span class="sig-paren">(</span><em class="sig-param">asr_train_config: Union[pathlib.Path, str], asr_model_file: Union[pathlib.Path, str] = None, lm_train_config: Union[pathlib.Path, str] = None, lm_file: Union[pathlib.Path, str] = None, token_type: str = None, bpemodel: str = None, device: str = 'cpu', maxlenratio: float = 0.0, minlenratio: float = 0.0, batch_size: int = 1, dtype: str = 'float32', beam_size: int = 20, ctc_weight: float = 0.5, lm_weight: float = 1.0, penalty: float = 0.0, nbest: int = 1, disable_repetition_detection=False, decoder_text_length_limit=0, encoded_feat_length_limit=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference_streaming.html#Speech2TextStreaming"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference_streaming.Speech2TextStreaming" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Speech2TextStreaming class</p>
<p>Details in “Streaming Transformer ASR with Blockwise Synchronous Beam Search”
(<a class="reference external" href="https://arxiv.org/abs/2006.14941">https://arxiv.org/abs/2006.14941</a>)</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">soundfile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speech2text</span> <span class="o">=</span> <span class="n">Speech2TextStreaming</span><span class="p">(</span><span class="s2">&quot;asr_config.yml&quot;</span><span class="p">,</span> <span class="s2">&quot;asr.pth&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">audio</span><span class="p">,</span> <span class="n">rate</span> <span class="o">=</span> <span class="n">soundfile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;speech.wav&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speech2text</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>
<span class="go">[(text, token, token_int, hypothesis object), ...]</span>
</pre></div>
</div>
<dl class="method">
<dt id="espnet2.bin.asr_inference_streaming.Speech2TextStreaming.apply_frontend">
<code class="sig-name descname">apply_frontend</code><span class="sig-paren">(</span><em class="sig-param">speech: torch.Tensor</em>, <em class="sig-param">prev_states=None</em>, <em class="sig-param">is_final: bool = False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference_streaming.html#Speech2TextStreaming.apply_frontend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference_streaming.Speech2TextStreaming.apply_frontend" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.bin.asr_inference_streaming.Speech2TextStreaming.assemble_hyps">
<code class="sig-name descname">assemble_hyps</code><span class="sig-paren">(</span><em class="sig-param">hyps</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference_streaming.html#Speech2TextStreaming.assemble_hyps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference_streaming.Speech2TextStreaming.assemble_hyps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.bin.asr_inference_streaming.Speech2TextStreaming.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference_streaming.html#Speech2TextStreaming.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference_streaming.Speech2TextStreaming.reset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="espnet2.bin.asr_inference_streaming.get_parser">
<code class="sig-prename descclassname">espnet2.bin.asr_inference_streaming.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference_streaming.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference_streaming.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.asr_inference_streaming.inference">
<code class="sig-prename descclassname">espnet2.bin.asr_inference_streaming.</code><code class="sig-name descname">inference</code><span class="sig-paren">(</span><em class="sig-param">output_dir: str, maxlenratio: float, minlenratio: float, batch_size: int, dtype: str, beam_size: int, ngpu: int, seed: int, ctc_weight: float, lm_weight: float, penalty: float, nbest: int, num_workers: int, log_level: Union[int, str], data_path_and_name_and_type: Sequence[Tuple[str, str, str]], key_file: Optional[str], asr_train_config: str, asr_model_file: str, lm_train_config: Optional[str], lm_file: Optional[str], word_lm_train_config: Optional[str], word_lm_file: Optional[str], token_type: Optional[str], bpemodel: Optional[str], allow_variable_data_keys: bool, sim_chunk_length: int, disable_repetition_detection: bool, encoded_feat_length_limit: int, decoder_text_length_limit: int</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference_streaming.html#inference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference_streaming.inference" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.asr_inference_streaming.main">
<code class="sig-prename descclassname">espnet2.bin.asr_inference_streaming.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference_streaming.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference_streaming.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="espnet2-bin-split-scps">
<span id="id3"></span><h2>espnet2.bin.split_scps<a class="headerlink" href="#espnet2-bin-split-scps" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.split_scps"></span><dl class="function">
<dt id="espnet2.bin.split_scps.get_parser">
<code class="sig-prename descclassname">espnet2.bin.split_scps.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; argparse.ArgumentParser<a class="reference internal" href="../_modules/espnet2/bin/split_scps.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.split_scps.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.split_scps.main">
<code class="sig-prename descclassname">espnet2.bin.split_scps.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/split_scps.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.split_scps.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.split_scps.split_scps">
<code class="sig-prename descclassname">espnet2.bin.split_scps.</code><code class="sig-name descname">split_scps</code><span class="sig-paren">(</span><em class="sig-param">scps: List[str], num_splits: int, names: Optional[List[str]], output_dir: str, log_level: str</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/split_scps.html#split_scps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.split_scps.split_scps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="espnet2-bin-gan-tts-train">
<span id="id4"></span><h2>espnet2.bin.gan_tts_train<a class="headerlink" href="#espnet2-bin-gan-tts-train" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.gan_tts_train"></span><dl class="function">
<dt id="espnet2.bin.gan_tts_train.get_parser">
<code class="sig-prename descclassname">espnet2.bin.gan_tts_train.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/gan_tts_train.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.gan_tts_train.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.gan_tts_train.main">
<code class="sig-prename descclassname">espnet2.bin.gan_tts_train.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/gan_tts_train.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.gan_tts_train.main" title="Permalink to this definition">¶</a></dt>
<dd><p>GAN-based TTS training</p>
<p class="rubric">Example</p>
<p>% python gan_tts_train.py –print_config –optim1 adadelta
% python gan_tts_train.py –config conf/train.yaml</p>
</dd></dl>

</section>
<section id="espnet2-bin-diar-inference">
<span id="id5"></span><h2>espnet2.bin.diar_inference<a class="headerlink" href="#espnet2-bin-diar-inference" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.diar_inference"></span><dl class="class">
<dt id="espnet2.bin.diar_inference.DiarizeSpeech">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.diar_inference.</code><code class="sig-name descname">DiarizeSpeech</code><span class="sig-paren">(</span><em class="sig-param">train_config: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">model_file: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">segment_size: Optional[float] = None</em>, <em class="sig-param">normalize_segment_scale: bool = False</em>, <em class="sig-param">show_progressbar: bool = False</em>, <em class="sig-param">num_spk: Optional[int] = None</em>, <em class="sig-param">device: str = 'cpu'</em>, <em class="sig-param">dtype: str = 'float32'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/diar_inference.html#DiarizeSpeech"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.diar_inference.DiarizeSpeech" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>DiarizeSpeech class</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">soundfile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">diarization</span> <span class="o">=</span> <span class="n">DiarizeSpeech</span><span class="p">(</span><span class="s2">&quot;diar_config.yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;diar.pth&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">audio</span><span class="p">,</span> <span class="n">rate</span> <span class="o">=</span> <span class="n">soundfile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;speech.wav&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">diarization</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>
<span class="go">[(spk_id, start, end), (spk_id2, start2, end2)]</span>
</pre></div>
</div>
<dl class="method">
<dt id="espnet2.bin.diar_inference.DiarizeSpeech.from_pretrained">
<em class="property">static </em><code class="sig-name descname">from_pretrained</code><span class="sig-paren">(</span><em class="sig-param">model_tag: Optional[str] = None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/diar_inference.html#DiarizeSpeech.from_pretrained"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.diar_inference.DiarizeSpeech.from_pretrained" title="Permalink to this definition">¶</a></dt>
<dd><p>Build DiarizeSpeech instance from the pretrained model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model_tag</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Model tag of the pretrained models.
Currently, the tags of espnet_model_zoo are supported.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DiarizeSpeech instance.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#espnet2.bin.diar_inference.DiarizeSpeech" title="espnet2.bin.diar_inference.DiarizeSpeech">DiarizeSpeech</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="espnet2.bin.diar_inference.get_parser">
<code class="sig-prename descclassname">espnet2.bin.diar_inference.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/diar_inference.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.diar_inference.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.diar_inference.inference">
<code class="sig-prename descclassname">espnet2.bin.diar_inference.</code><code class="sig-name descname">inference</code><span class="sig-paren">(</span><em class="sig-param">output_dir: str, batch_size: int, dtype: str, fs: int, ngpu: int, seed: int, num_workers: int, log_level: Union[int, str], data_path_and_name_and_type: Sequence[Tuple[str, str, str]], key_file: Optional[str], train_config: Optional[str], model_file: Optional[str], model_tag: Optional[str], allow_variable_data_keys: bool, segment_size: Optional[float], show_progressbar: bool, num_spk: Optional[int]</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/diar_inference.html#inference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.diar_inference.inference" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.diar_inference.main">
<code class="sig-prename descclassname">espnet2.bin.diar_inference.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/diar_inference.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.diar_inference.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="espnet2-bin-enh-scoring">
<span id="id6"></span><h2>espnet2.bin.enh_scoring<a class="headerlink" href="#espnet2-bin-enh-scoring" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.enh_scoring"></span><dl class="function">
<dt id="espnet2.bin.enh_scoring.get_parser">
<code class="sig-prename descclassname">espnet2.bin.enh_scoring.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_scoring.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_scoring.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.enh_scoring.main">
<code class="sig-prename descclassname">espnet2.bin.enh_scoring.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_scoring.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_scoring.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.enh_scoring.scoring">
<code class="sig-prename descclassname">espnet2.bin.enh_scoring.</code><code class="sig-name descname">scoring</code><span class="sig-paren">(</span><em class="sig-param">output_dir: str, dtype: str, log_level: Union[int, str], key_file: str, ref_scp: List[str], inf_scp: List[str], ref_channel: int</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_scoring.html#scoring"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_scoring.scoring" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="espnet2-bin-lm-calc-perplexity">
<span id="id7"></span><h2>espnet2.bin.lm_calc_perplexity<a class="headerlink" href="#espnet2-bin-lm-calc-perplexity" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.lm_calc_perplexity"></span><dl class="function">
<dt id="espnet2.bin.lm_calc_perplexity.calc_perplexity">
<code class="sig-prename descclassname">espnet2.bin.lm_calc_perplexity.</code><code class="sig-name descname">calc_perplexity</code><span class="sig-paren">(</span><em class="sig-param">output_dir: str, batch_size: int, dtype: str, ngpu: int, seed: int, num_workers: int, log_level: Union[int, str], data_path_and_name_and_type: Sequence[Tuple[str, str, str]], key_file: Optional[str], train_config: Optional[str], model_file: Optional[str], log_base: Optional[float], allow_variable_data_keys: bool</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/lm_calc_perplexity.html#calc_perplexity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.lm_calc_perplexity.calc_perplexity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.lm_calc_perplexity.get_parser">
<code class="sig-prename descclassname">espnet2.bin.lm_calc_perplexity.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/lm_calc_perplexity.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.lm_calc_perplexity.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.lm_calc_perplexity.main">
<code class="sig-prename descclassname">espnet2.bin.lm_calc_perplexity.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/lm_calc_perplexity.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.lm_calc_perplexity.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="espnet2-bin-diar-train">
<span id="id8"></span><h2>espnet2.bin.diar_train<a class="headerlink" href="#espnet2-bin-diar-train" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.diar_train"></span><dl class="function">
<dt id="espnet2.bin.diar_train.get_parser">
<code class="sig-prename descclassname">espnet2.bin.diar_train.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/diar_train.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.diar_train.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.diar_train.main">
<code class="sig-prename descclassname">espnet2.bin.diar_train.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/diar_train.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.diar_train.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Speaker diarization training.</p>
<p class="rubric">Example</p>
<dl class="simple">
<dt>% python diar_train.py diar –print_config –optim adadelta </dt><dd><p>&gt; conf/train_diar.yaml</p>
</dd>
</dl>
<p>% python diar_train.py –config conf/train_diar.yaml</p>
</dd></dl>

</section>
<section id="espnet2-bin-enh-train">
<span id="id9"></span><h2>espnet2.bin.enh_train<a class="headerlink" href="#espnet2-bin-enh-train" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.enh_train"></span><dl class="function">
<dt id="espnet2.bin.enh_train.get_parser">
<code class="sig-prename descclassname">espnet2.bin.enh_train.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_train.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_train.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.enh_train.main">
<code class="sig-prename descclassname">espnet2.bin.enh_train.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_train.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_train.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Enhancemnet frontend training.</p>
<p class="rubric">Example</p>
<dl class="simple">
<dt>% python enh_train.py enh –print_config –optim adadelta </dt><dd><p>&gt; conf/train_enh.yaml</p>
</dd>
</dl>
<p>% python enh_train.py –config conf/train_enh.yaml</p>
</dd></dl>

</section>
<section id="espnet2-bin-asr-inference-maskctc">
<span id="id10"></span><h2>espnet2.bin.asr_inference_maskctc<a class="headerlink" href="#espnet2-bin-asr-inference-maskctc" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.asr_inference_maskctc"></span><dl class="class">
<dt id="espnet2.bin.asr_inference_maskctc.Speech2Text">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.asr_inference_maskctc.</code><code class="sig-name descname">Speech2Text</code><span class="sig-paren">(</span><em class="sig-param">asr_train_config: Union[pathlib.Path, str], asr_model_file: Union[pathlib.Path, str] = None, token_type: str = None, bpemodel: str = None, device: str = 'cpu', batch_size: int = 1, dtype: str = 'float32', maskctc_n_iterations: int = 10, maskctc_threshold_probability: float = 0.99</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference_maskctc.html#Speech2Text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference_maskctc.Speech2Text" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Speech2Text class</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">soundfile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speech2text</span> <span class="o">=</span> <span class="n">Speech2Text</span><span class="p">(</span><span class="s2">&quot;asr_config.yml&quot;</span><span class="p">,</span> <span class="s2">&quot;asr.pth&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">audio</span><span class="p">,</span> <span class="n">rate</span> <span class="o">=</span> <span class="n">soundfile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;speech.wav&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speech2text</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>
<span class="go">[(text, token, token_int, hypothesis object), ...]</span>
</pre></div>
</div>
<dl class="method">
<dt id="espnet2.bin.asr_inference_maskctc.Speech2Text.from_pretrained">
<em class="property">static </em><code class="sig-name descname">from_pretrained</code><span class="sig-paren">(</span><em class="sig-param">model_tag: Optional[str] = None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference_maskctc.html#Speech2Text.from_pretrained"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference_maskctc.Speech2Text.from_pretrained" title="Permalink to this definition">¶</a></dt>
<dd><p>Build Speech2Text instance from the pretrained model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model_tag</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Model tag of the pretrained models.
Currently, the tags of espnet_model_zoo are supported.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Speech2Text instance.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#espnet2.bin.asr_inference_maskctc.Speech2Text" title="espnet2.bin.asr_inference_maskctc.Speech2Text">Speech2Text</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="espnet2.bin.asr_inference_maskctc.get_parser">
<code class="sig-prename descclassname">espnet2.bin.asr_inference_maskctc.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference_maskctc.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference_maskctc.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.asr_inference_maskctc.inference">
<code class="sig-prename descclassname">espnet2.bin.asr_inference_maskctc.</code><code class="sig-name descname">inference</code><span class="sig-paren">(</span><em class="sig-param">output_dir: str, batch_size: int, dtype: str, ngpu: int, seed: int, num_workers: int, log_level: Union[int, str], data_path_and_name_and_type: Sequence[Tuple[str, str, str]], key_file: Optional[str], asr_train_config: str, asr_model_file: str, model_tag: Optional[str], token_type: Optional[str], bpemodel: Optional[str], allow_variable_data_keys: bool, maskctc_n_iterations: int, maskctc_threshold_probability: float</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference_maskctc.html#inference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference_maskctc.inference" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.asr_inference_maskctc.main">
<code class="sig-prename descclassname">espnet2.bin.asr_inference_maskctc.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference_maskctc.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference_maskctc.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="espnet2-bin-st-inference-streaming">
<span id="id11"></span><h2>espnet2.bin.st_inference_streaming<a class="headerlink" href="#espnet2-bin-st-inference-streaming" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.st_inference_streaming"></span><dl class="class">
<dt id="espnet2.bin.st_inference_streaming.Speech2TextStreaming">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.st_inference_streaming.</code><code class="sig-name descname">Speech2TextStreaming</code><span class="sig-paren">(</span><em class="sig-param">st_train_config: Union[pathlib.Path, str], st_model_file: Union[pathlib.Path, str] = None, lm_train_config: Union[pathlib.Path, str] = None, lm_file: Union[pathlib.Path, str] = None, token_type: str = None, bpemodel: str = None, device: str = 'cpu', maxlenratio: float = 0.0, minlenratio: float = 0.0, batch_size: int = 1, dtype: str = 'float32', beam_size: int = 20, lm_weight: float = 1.0, penalty: float = 0.0, nbest: int = 1, disable_repetition_detection=False, decoder_text_length_limit=0, encoded_feat_length_limit=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_inference_streaming.html#Speech2TextStreaming"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_inference_streaming.Speech2TextStreaming" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Speech2TextStreaming class</p>
<p>Details in “Streaming Transformer ASR with Blockwise Synchronous Beam Search”
(<a class="reference external" href="https://arxiv.org/abs/2006.14941">https://arxiv.org/abs/2006.14941</a>)</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">soundfile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speech2text</span> <span class="o">=</span> <span class="n">Speech2TextStreaming</span><span class="p">(</span><span class="s2">&quot;asr_config.yml&quot;</span><span class="p">,</span> <span class="s2">&quot;asr.pth&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">audio</span><span class="p">,</span> <span class="n">rate</span> <span class="o">=</span> <span class="n">soundfile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;speech.wav&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speech2text</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>
<span class="go">[(text, token, token_int, hypothesis object), ...]</span>
</pre></div>
</div>
<dl class="method">
<dt id="espnet2.bin.st_inference_streaming.Speech2TextStreaming.apply_frontend">
<code class="sig-name descname">apply_frontend</code><span class="sig-paren">(</span><em class="sig-param">speech: torch.Tensor</em>, <em class="sig-param">prev_states=None</em>, <em class="sig-param">is_final: bool = False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_inference_streaming.html#Speech2TextStreaming.apply_frontend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_inference_streaming.Speech2TextStreaming.apply_frontend" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.bin.st_inference_streaming.Speech2TextStreaming.assemble_hyps">
<code class="sig-name descname">assemble_hyps</code><span class="sig-paren">(</span><em class="sig-param">hyps</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_inference_streaming.html#Speech2TextStreaming.assemble_hyps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_inference_streaming.Speech2TextStreaming.assemble_hyps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="espnet2.bin.st_inference_streaming.Speech2TextStreaming.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_inference_streaming.html#Speech2TextStreaming.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_inference_streaming.Speech2TextStreaming.reset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="espnet2.bin.st_inference_streaming.get_parser">
<code class="sig-prename descclassname">espnet2.bin.st_inference_streaming.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_inference_streaming.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_inference_streaming.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.st_inference_streaming.inference">
<code class="sig-prename descclassname">espnet2.bin.st_inference_streaming.</code><code class="sig-name descname">inference</code><span class="sig-paren">(</span><em class="sig-param">output_dir: str, maxlenratio: float, minlenratio: float, batch_size: int, dtype: str, beam_size: int, ngpu: int, seed: int, lm_weight: float, penalty: float, nbest: int, num_workers: int, log_level: Union[int, str], data_path_and_name_and_type: Sequence[Tuple[str, str, str]], key_file: Optional[str], st_train_config: str, st_model_file: str, lm_train_config: Optional[str], lm_file: Optional[str], word_lm_train_config: Optional[str], word_lm_file: Optional[str], token_type: Optional[str], bpemodel: Optional[str], allow_variable_data_keys: bool, sim_chunk_length: int, disable_repetition_detection: bool, encoded_feat_length_limit: int, decoder_text_length_limit: int</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_inference_streaming.html#inference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_inference_streaming.inference" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.st_inference_streaming.main">
<code class="sig-prename descclassname">espnet2.bin.st_inference_streaming.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_inference_streaming.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_inference_streaming.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="espnet2-bin-asr-train">
<span id="id12"></span><h2>espnet2.bin.asr_train<a class="headerlink" href="#espnet2-bin-asr-train" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.asr_train"></span><dl class="function">
<dt id="espnet2.bin.asr_train.get_parser">
<code class="sig-prename descclassname">espnet2.bin.asr_train.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_train.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_train.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.asr_train.main">
<code class="sig-prename descclassname">espnet2.bin.asr_train.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_train.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_train.main" title="Permalink to this definition">¶</a></dt>
<dd><p>ASR training.</p>
<p class="rubric">Example</p>
<dl class="simple">
<dt>% python asr_train.py asr –print_config –optim adadelta </dt><dd><p>&gt; conf/train_asr.yaml</p>
</dd>
</dl>
<p>% python asr_train.py –config conf/train_asr.yaml</p>
</dd></dl>

</section>
<section id="espnet2-bin-st-train">
<span id="id13"></span><h2>espnet2.bin.st_train<a class="headerlink" href="#espnet2-bin-st-train" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.st_train"></span><dl class="function">
<dt id="espnet2.bin.st_train.get_parser">
<code class="sig-prename descclassname">espnet2.bin.st_train.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_train.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_train.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.st_train.main">
<code class="sig-prename descclassname">espnet2.bin.st_train.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_train.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_train.main" title="Permalink to this definition">¶</a></dt>
<dd><p>ST training.</p>
<p class="rubric">Example</p>
<dl class="simple">
<dt>% python st_train.py st –print_config –optim adadelta </dt><dd><p>&gt; conf/train_st.yaml</p>
</dd>
</dl>
<p>% python st_train.py –config conf/train_st.yaml</p>
</dd></dl>

</section>
<section id="espnet2-bin-enh-s2t-train">
<span id="id14"></span><h2>espnet2.bin.enh_s2t_train<a class="headerlink" href="#espnet2-bin-enh-s2t-train" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.enh_s2t_train"></span><dl class="function">
<dt id="espnet2.bin.enh_s2t_train.get_parser">
<code class="sig-prename descclassname">espnet2.bin.enh_s2t_train.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_s2t_train.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_s2t_train.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.enh_s2t_train.main">
<code class="sig-prename descclassname">espnet2.bin.enh_s2t_train.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_s2t_train.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_s2t_train.main" title="Permalink to this definition">¶</a></dt>
<dd><p>EnhS2T training.</p>
<p class="rubric">Example</p>
<dl class="simple">
<dt>% python enh_s2t_train.py enh_s2t –print_config –optim adadelta </dt><dd><p>&gt; conf/train_enh_s2t.yaml</p>
</dd>
</dl>
<p>% python enh_s2t_train.py –config conf/train_enh_s2t.yaml</p>
</dd></dl>

</section>
<section id="espnet2-bin-tts-inference">
<span id="id15"></span><h2>espnet2.bin.tts_inference<a class="headerlink" href="#espnet2-bin-tts-inference" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.tts_inference"></span><p>Script to run the inference of text-to-speeech model.</p>
<dl class="class">
<dt id="espnet2.bin.tts_inference.Text2Speech">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.tts_inference.</code><code class="sig-name descname">Text2Speech</code><span class="sig-paren">(</span><em class="sig-param">train_config: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">model_file: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">threshold: float = 0.5</em>, <em class="sig-param">minlenratio: float = 0.0</em>, <em class="sig-param">maxlenratio: float = 10.0</em>, <em class="sig-param">use_teacher_forcing: bool = False</em>, <em class="sig-param">use_att_constraint: bool = False</em>, <em class="sig-param">backward_window: int = 1</em>, <em class="sig-param">forward_window: int = 3</em>, <em class="sig-param">speed_control_alpha: float = 1.0</em>, <em class="sig-param">noise_scale: float = 0.667</em>, <em class="sig-param">noise_scale_dur: float = 0.8</em>, <em class="sig-param">vocoder_config: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">vocoder_file: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">dtype: str = 'float32'</em>, <em class="sig-param">device: str = 'cpu'</em>, <em class="sig-param">seed: int = 777</em>, <em class="sig-param">always_fix_seed: bool = False</em>, <em class="sig-param">prefer_normalized_feats: bool = False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/tts_inference.html#Text2Speech"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.tts_inference.Text2Speech" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Text2Speech class.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">espnet2.bin.tts_inference</span> <span class="kn">import</span> <span class="n">Text2Speech</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Case 1: Load the local model and use Griffin-Lim vocoder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">text2speech</span> <span class="o">=</span> <span class="n">Text2Speech</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">train_config</span><span class="o">=</span><span class="s2">&quot;/path/to/config.yml&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">model_file</span><span class="o">=</span><span class="s2">&quot;/path/to/model.pth&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Case 2: Load the local model and the pretrained vocoder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">text2speech</span> <span class="o">=</span> <span class="n">Text2Speech</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">train_config</span><span class="o">=</span><span class="s2">&quot;/path/to/config.yml&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">model_file</span><span class="o">=</span><span class="s2">&quot;/path/to/model.pth&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">vocoder_tag</span><span class="o">=</span><span class="s2">&quot;kan-bayashi/ljspeech_tacotron2&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Case 3: Load the pretrained model and use Griffin-Lim vocoder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">text2speech</span> <span class="o">=</span> <span class="n">Text2Speech</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">model_tag</span><span class="o">=</span><span class="s2">&quot;kan-bayashi/ljspeech_tacotron2&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Case 4: Load the pretrained model and the pretrained vocoder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">text2speech</span> <span class="o">=</span> <span class="n">Text2Speech</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">model_tag</span><span class="o">=</span><span class="s2">&quot;kan-bayashi/ljspeech_tacotron2&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">vocoder_tag</span><span class="o">=</span><span class="s2">&quot;parallel_wavegan/ljspeech_parallel_wavegan.v1&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Run inference and save as wav file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">soundfile</span> <span class="k">as</span> <span class="nn">sf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wav</span> <span class="o">=</span> <span class="n">text2speech</span><span class="p">(</span><span class="s2">&quot;Hello, World&quot;</span><span class="p">)[</span><span class="s2">&quot;wav&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;out.wav&quot;</span><span class="p">,</span> <span class="n">wav</span><span class="o">.</span><span class="n">numpy</span><span class="p">(),</span> <span class="n">text2speech</span><span class="o">.</span><span class="n">fs</span><span class="p">,</span> <span class="s2">&quot;PCM_16&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Initialize Text2Speech module.</p>
<dl class="method">
<dt id="espnet2.bin.tts_inference.Text2Speech.from_pretrained">
<em class="property">static </em><code class="sig-name descname">from_pretrained</code><span class="sig-paren">(</span><em class="sig-param">model_tag: Optional[str] = None</em>, <em class="sig-param">vocoder_tag: Optional[str] = None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/tts_inference.html#Text2Speech.from_pretrained"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.tts_inference.Text2Speech.from_pretrained" title="Permalink to this definition">¶</a></dt>
<dd><p>Build Text2Speech instance from the pretrained model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_tag</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Model tag of the pretrained models.
Currently, the tags of espnet_model_zoo are supported.</p></li>
<li><p><strong>vocoder_tag</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Vocoder tag of the pretrained vocoders.
Currently, the tags of parallel_wavegan are supported, which should
start with the prefix “parallel_wavegan/”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Text2Speech instance.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#espnet2.bin.tts_inference.Text2Speech" title="espnet2.bin.tts_inference.Text2Speech">Text2Speech</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="espnet2.bin.tts_inference.Text2Speech.fs">
<em class="property">property </em><code class="sig-name descname">fs</code><a class="headerlink" href="#espnet2.bin.tts_inference.Text2Speech.fs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return sampling rate.</p>
</dd></dl>

<dl class="method">
<dt id="espnet2.bin.tts_inference.Text2Speech.use_lids">
<em class="property">property </em><code class="sig-name descname">use_lids</code><a class="headerlink" href="#espnet2.bin.tts_inference.Text2Speech.use_lids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return sid is needed or not in the inference.</p>
</dd></dl>

<dl class="method">
<dt id="espnet2.bin.tts_inference.Text2Speech.use_sids">
<em class="property">property </em><code class="sig-name descname">use_sids</code><a class="headerlink" href="#espnet2.bin.tts_inference.Text2Speech.use_sids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return sid is needed or not in the inference.</p>
</dd></dl>

<dl class="method">
<dt id="espnet2.bin.tts_inference.Text2Speech.use_speech">
<em class="property">property </em><code class="sig-name descname">use_speech</code><a class="headerlink" href="#espnet2.bin.tts_inference.Text2Speech.use_speech" title="Permalink to this definition">¶</a></dt>
<dd><p>Return speech is needed or not in the inference.</p>
</dd></dl>

<dl class="method">
<dt id="espnet2.bin.tts_inference.Text2Speech.use_spembs">
<em class="property">property </em><code class="sig-name descname">use_spembs</code><a class="headerlink" href="#espnet2.bin.tts_inference.Text2Speech.use_spembs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return spemb is needed or not in the inference.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="espnet2.bin.tts_inference.get_parser">
<code class="sig-prename descclassname">espnet2.bin.tts_inference.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/tts_inference.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.tts_inference.get_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Get argument parser.</p>
</dd></dl>

<dl class="function">
<dt id="espnet2.bin.tts_inference.inference">
<code class="sig-prename descclassname">espnet2.bin.tts_inference.</code><code class="sig-name descname">inference</code><span class="sig-paren">(</span><em class="sig-param">output_dir: str, batch_size: int, dtype: str, ngpu: int, seed: int, num_workers: int, log_level: Union[int, str], data_path_and_name_and_type: Sequence[Tuple[str, str, str]], key_file: Optional[str], train_config: Optional[str], model_file: Optional[str], model_tag: Optional[str], threshold: float, minlenratio: float, maxlenratio: float, use_teacher_forcing: bool, use_att_constraint: bool, backward_window: int, forward_window: int, speed_control_alpha: float, noise_scale: float, noise_scale_dur: float, always_fix_seed: bool, allow_variable_data_keys: bool, vocoder_config: Optional[str], vocoder_file: Optional[str], vocoder_tag: Optional[str]</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/tts_inference.html#inference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.tts_inference.inference" title="Permalink to this definition">¶</a></dt>
<dd><p>Run text-to-speech inference.</p>
</dd></dl>

<dl class="function">
<dt id="espnet2.bin.tts_inference.main">
<code class="sig-prename descclassname">espnet2.bin.tts_inference.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/tts_inference.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.tts_inference.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Run TTS model inference.</p>
</dd></dl>

</section>
<section id="espnet2-bin-lm-train">
<span id="id16"></span><h2>espnet2.bin.lm_train<a class="headerlink" href="#espnet2-bin-lm-train" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.lm_train"></span><dl class="function">
<dt id="espnet2.bin.lm_train.get_parser">
<code class="sig-prename descclassname">espnet2.bin.lm_train.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/lm_train.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.lm_train.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.lm_train.main">
<code class="sig-prename descclassname">espnet2.bin.lm_train.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/lm_train.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.lm_train.main" title="Permalink to this definition">¶</a></dt>
<dd><p>LM training.</p>
<p class="rubric">Example</p>
<p>% python lm_train.py asr –print_config –optim adadelta
% python lm_train.py –config conf/train_asr.yaml</p>
</dd></dl>

</section>
<section id="espnet2-bin-asr-inference-k2">
<span id="id17"></span><h2>espnet2.bin.asr_inference_k2<a class="headerlink" href="#espnet2-bin-asr-inference-k2" title="Permalink to this headline">¶</a></h2>
</section>
<section id="espnet2-bin-aggregate-stats-dirs">
<span id="id18"></span><h2>espnet2.bin.aggregate_stats_dirs<a class="headerlink" href="#espnet2-bin-aggregate-stats-dirs" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.aggregate_stats_dirs"></span><dl class="function">
<dt id="espnet2.bin.aggregate_stats_dirs.aggregate_stats_dirs">
<code class="sig-prename descclassname">espnet2.bin.aggregate_stats_dirs.</code><code class="sig-name descname">aggregate_stats_dirs</code><span class="sig-paren">(</span><em class="sig-param">input_dir: Iterable[Union[str, pathlib.Path]], output_dir: Union[str, pathlib.Path], log_level: str, skip_sum_stats: bool</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/aggregate_stats_dirs.html#aggregate_stats_dirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.aggregate_stats_dirs.aggregate_stats_dirs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.aggregate_stats_dirs.get_parser">
<code class="sig-prename descclassname">espnet2.bin.aggregate_stats_dirs.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; argparse.ArgumentParser<a class="reference internal" href="../_modules/espnet2/bin/aggregate_stats_dirs.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.aggregate_stats_dirs.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.aggregate_stats_dirs.main">
<code class="sig-prename descclassname">espnet2.bin.aggregate_stats_dirs.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/aggregate_stats_dirs.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.aggregate_stats_dirs.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="espnet2-bin-mt-inference">
<span id="id19"></span><h2>espnet2.bin.mt_inference<a class="headerlink" href="#espnet2-bin-mt-inference" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.mt_inference"></span><dl class="class">
<dt id="espnet2.bin.mt_inference.Text2Text">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.mt_inference.</code><code class="sig-name descname">Text2Text</code><span class="sig-paren">(</span><em class="sig-param">mt_train_config: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">mt_model_file: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">lm_train_config: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">lm_file: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">ngram_scorer: str = 'full'</em>, <em class="sig-param">ngram_file: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">token_type: str = None</em>, <em class="sig-param">bpemodel: str = None</em>, <em class="sig-param">device: str = 'cpu'</em>, <em class="sig-param">maxlenratio: float = 0.0</em>, <em class="sig-param">minlenratio: float = 0.0</em>, <em class="sig-param">batch_size: int = 1</em>, <em class="sig-param">dtype: str = 'float32'</em>, <em class="sig-param">beam_size: int = 20</em>, <em class="sig-param">lm_weight: float = 1.0</em>, <em class="sig-param">ngram_weight: float = 0.9</em>, <em class="sig-param">penalty: float = 0.0</em>, <em class="sig-param">nbest: int = 1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/mt_inference.html#Text2Text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.mt_inference.Text2Text" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Text2Text class</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">text2text</span> <span class="o">=</span> <span class="n">Text2Text</span><span class="p">(</span><span class="s2">&quot;mt_config.yml&quot;</span><span class="p">,</span> <span class="s2">&quot;mt.pth&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">text2text</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>
<span class="go">[(text, token, token_int, hypothesis object), ...]</span>
</pre></div>
</div>
<dl class="method">
<dt id="espnet2.bin.mt_inference.Text2Text.from_pretrained">
<em class="property">static </em><code class="sig-name descname">from_pretrained</code><span class="sig-paren">(</span><em class="sig-param">model_tag: Optional[str] = None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/mt_inference.html#Text2Text.from_pretrained"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.mt_inference.Text2Text.from_pretrained" title="Permalink to this definition">¶</a></dt>
<dd><p>Build Text2Text instance from the pretrained model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model_tag</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Model tag of the pretrained models.
Currently, the tags of espnet_model_zoo are supported.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Text2Text instance.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#espnet2.bin.mt_inference.Text2Text" title="espnet2.bin.mt_inference.Text2Text">Text2Text</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="espnet2.bin.mt_inference.get_parser">
<code class="sig-prename descclassname">espnet2.bin.mt_inference.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/mt_inference.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.mt_inference.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.mt_inference.inference">
<code class="sig-prename descclassname">espnet2.bin.mt_inference.</code><code class="sig-name descname">inference</code><span class="sig-paren">(</span><em class="sig-param">output_dir: str, maxlenratio: float, minlenratio: float, batch_size: int, dtype: str, beam_size: int, ngpu: int, seed: int, lm_weight: float, ngram_weight: float, penalty: float, nbest: int, num_workers: int, log_level: Union[int, str], data_path_and_name_and_type: Sequence[Tuple[str, str, str]], key_file: Optional[str], mt_train_config: Optional[str], mt_model_file: Optional[str], lm_train_config: Optional[str], lm_file: Optional[str], word_lm_train_config: Optional[str], word_lm_file: Optional[str], ngram_file: Optional[str], model_tag: Optional[str], token_type: Optional[str], bpemodel: Optional[str], allow_variable_data_keys: bool</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/mt_inference.html#inference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.mt_inference.inference" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.mt_inference.main">
<code class="sig-prename descclassname">espnet2.bin.mt_inference.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/mt_inference.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.mt_inference.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="espnet2-bin-pack">
<span id="id20"></span><h2>espnet2.bin.pack<a class="headerlink" href="#espnet2-bin-pack" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.pack"></span><dl class="class">
<dt id="espnet2.bin.pack.ASRPackedContents">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.pack.</code><code class="sig-name descname">ASRPackedContents</code><a class="reference internal" href="../_modules/espnet2/bin/pack.html#ASRPackedContents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.pack.ASRPackedContents" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#espnet2.bin.pack.PackedContents" title="espnet2.bin.pack.PackedContents"><code class="xref py py-class docutils literal notranslate"><span class="pre">espnet2.bin.pack.PackedContents</span></code></a></p>
<dl class="attribute">
<dt id="espnet2.bin.pack.ASRPackedContents.files">
<code class="sig-name descname">files</code><em class="property"> = ['asr_model_file', 'lm_file']</em><a class="headerlink" href="#espnet2.bin.pack.ASRPackedContents.files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.pack.ASRPackedContents.yaml_files">
<code class="sig-name descname">yaml_files</code><em class="property"> = ['asr_train_config', 'lm_train_config']</em><a class="headerlink" href="#espnet2.bin.pack.ASRPackedContents.yaml_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="espnet2.bin.pack.DiarPackedContents">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.pack.</code><code class="sig-name descname">DiarPackedContents</code><a class="reference internal" href="../_modules/espnet2/bin/pack.html#DiarPackedContents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.pack.DiarPackedContents" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#espnet2.bin.pack.PackedContents" title="espnet2.bin.pack.PackedContents"><code class="xref py py-class docutils literal notranslate"><span class="pre">espnet2.bin.pack.PackedContents</span></code></a></p>
<dl class="attribute">
<dt id="espnet2.bin.pack.DiarPackedContents.files">
<code class="sig-name descname">files</code><em class="property"> = ['model_file']</em><a class="headerlink" href="#espnet2.bin.pack.DiarPackedContents.files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.pack.DiarPackedContents.yaml_files">
<code class="sig-name descname">yaml_files</code><em class="property"> = ['train_config']</em><a class="headerlink" href="#espnet2.bin.pack.DiarPackedContents.yaml_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="espnet2.bin.pack.EnhPackedContents">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.pack.</code><code class="sig-name descname">EnhPackedContents</code><a class="reference internal" href="../_modules/espnet2/bin/pack.html#EnhPackedContents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.pack.EnhPackedContents" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#espnet2.bin.pack.PackedContents" title="espnet2.bin.pack.PackedContents"><code class="xref py py-class docutils literal notranslate"><span class="pre">espnet2.bin.pack.PackedContents</span></code></a></p>
<dl class="attribute">
<dt id="espnet2.bin.pack.EnhPackedContents.files">
<code class="sig-name descname">files</code><em class="property"> = ['model_file']</em><a class="headerlink" href="#espnet2.bin.pack.EnhPackedContents.files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.pack.EnhPackedContents.yaml_files">
<code class="sig-name descname">yaml_files</code><em class="property"> = ['train_config']</em><a class="headerlink" href="#espnet2.bin.pack.EnhPackedContents.yaml_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="espnet2.bin.pack.EnhS2TPackedContents">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.pack.</code><code class="sig-name descname">EnhS2TPackedContents</code><a class="reference internal" href="../_modules/espnet2/bin/pack.html#EnhS2TPackedContents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.pack.EnhS2TPackedContents" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#espnet2.bin.pack.PackedContents" title="espnet2.bin.pack.PackedContents"><code class="xref py py-class docutils literal notranslate"><span class="pre">espnet2.bin.pack.PackedContents</span></code></a></p>
<dl class="attribute">
<dt id="espnet2.bin.pack.EnhS2TPackedContents.files">
<code class="sig-name descname">files</code><em class="property"> = ['enh_s2t_model_file', 'lm_file']</em><a class="headerlink" href="#espnet2.bin.pack.EnhS2TPackedContents.files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.pack.EnhS2TPackedContents.yaml_files">
<code class="sig-name descname">yaml_files</code><em class="property"> = ['enh_s2t_train_config', 'lm_train_config']</em><a class="headerlink" href="#espnet2.bin.pack.EnhS2TPackedContents.yaml_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="espnet2.bin.pack.PackedContents">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.pack.</code><code class="sig-name descname">PackedContents</code><a class="reference internal" href="../_modules/espnet2/bin/pack.html#PackedContents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.pack.PackedContents" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="espnet2.bin.pack.PackedContents.files">
<code class="sig-name descname">files</code><em class="property"> = []</em><a class="headerlink" href="#espnet2.bin.pack.PackedContents.files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.pack.PackedContents.yaml_files">
<code class="sig-name descname">yaml_files</code><em class="property"> = []</em><a class="headerlink" href="#espnet2.bin.pack.PackedContents.yaml_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="espnet2.bin.pack.STPackedContents">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.pack.</code><code class="sig-name descname">STPackedContents</code><a class="reference internal" href="../_modules/espnet2/bin/pack.html#STPackedContents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.pack.STPackedContents" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#espnet2.bin.pack.PackedContents" title="espnet2.bin.pack.PackedContents"><code class="xref py py-class docutils literal notranslate"><span class="pre">espnet2.bin.pack.PackedContents</span></code></a></p>
<dl class="attribute">
<dt id="espnet2.bin.pack.STPackedContents.files">
<code class="sig-name descname">files</code><em class="property"> = ['st_model_file']</em><a class="headerlink" href="#espnet2.bin.pack.STPackedContents.files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.pack.STPackedContents.yaml_files">
<code class="sig-name descname">yaml_files</code><em class="property"> = ['st_train_config']</em><a class="headerlink" href="#espnet2.bin.pack.STPackedContents.yaml_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="espnet2.bin.pack.TTSPackedContents">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.pack.</code><code class="sig-name descname">TTSPackedContents</code><a class="reference internal" href="../_modules/espnet2/bin/pack.html#TTSPackedContents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.pack.TTSPackedContents" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#espnet2.bin.pack.PackedContents" title="espnet2.bin.pack.PackedContents"><code class="xref py py-class docutils literal notranslate"><span class="pre">espnet2.bin.pack.PackedContents</span></code></a></p>
<dl class="attribute">
<dt id="espnet2.bin.pack.TTSPackedContents.files">
<code class="sig-name descname">files</code><em class="property"> = ['model_file']</em><a class="headerlink" href="#espnet2.bin.pack.TTSPackedContents.files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="espnet2.bin.pack.TTSPackedContents.yaml_files">
<code class="sig-name descname">yaml_files</code><em class="property"> = ['train_config']</em><a class="headerlink" href="#espnet2.bin.pack.TTSPackedContents.yaml_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="espnet2.bin.pack.add_arguments">
<code class="sig-prename descclassname">espnet2.bin.pack.</code><code class="sig-name descname">add_arguments</code><span class="sig-paren">(</span><em class="sig-param">parser: argparse.ArgumentParser, contents: Type[espnet2.bin.pack.PackedContents]</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/pack.html#add_arguments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.pack.add_arguments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.pack.get_parser">
<code class="sig-prename descclassname">espnet2.bin.pack.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; argparse.ArgumentParser<a class="reference internal" href="../_modules/espnet2/bin/pack.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.pack.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.pack.main">
<code class="sig-prename descclassname">espnet2.bin.pack.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/pack.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.pack.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="espnet2-bin-enh-inference">
<span id="id21"></span><h2>espnet2.bin.enh_inference<a class="headerlink" href="#espnet2-bin-enh-inference" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.enh_inference"></span><dl class="class">
<dt id="espnet2.bin.enh_inference.SeparateSpeech">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.enh_inference.</code><code class="sig-name descname">SeparateSpeech</code><span class="sig-paren">(</span><em class="sig-param">train_config: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">model_file: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">inference_config: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">segment_size: Optional[float] = None</em>, <em class="sig-param">hop_size: Optional[float] = None</em>, <em class="sig-param">normalize_segment_scale: bool = False</em>, <em class="sig-param">show_progressbar: bool = False</em>, <em class="sig-param">ref_channel: Optional[int] = None</em>, <em class="sig-param">normalize_output_wav: bool = False</em>, <em class="sig-param">device: str = 'cpu'</em>, <em class="sig-param">dtype: str = 'float32'</em>, <em class="sig-param">enh_s2t_task: bool = False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_inference.html#SeparateSpeech"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_inference.SeparateSpeech" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>SeparateSpeech class</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">soundfile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">separate_speech</span> <span class="o">=</span> <span class="n">SeparateSpeech</span><span class="p">(</span><span class="s2">&quot;enh_config.yml&quot;</span><span class="p">,</span> <span class="s2">&quot;enh.pth&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">audio</span><span class="p">,</span> <span class="n">rate</span> <span class="o">=</span> <span class="n">soundfile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;speech.wav&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">separate_speech</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>
<span class="go">[separated_audio1, separated_audio2, ...]</span>
</pre></div>
</div>
<dl class="method">
<dt id="espnet2.bin.enh_inference.SeparateSpeech.cal_permumation">
<code class="sig-name descname">cal_permumation</code><span class="sig-paren">(</span><em class="sig-param">ref_wavs</em>, <em class="sig-param">enh_wavs</em>, <em class="sig-param">criterion='si_snr'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_inference.html#SeparateSpeech.cal_permumation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_inference.SeparateSpeech.cal_permumation" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the permutation between seaprated streams in two adjacent segments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ref_wavs</strong> (<em>List</em><em>[</em><em>torch.Tensor</em><em>]</em>) – [(Batch, Nsamples)]</p></li>
<li><p><strong>enh_wavs</strong> (<em>List</em><em>[</em><em>torch.Tensor</em><em>]</em>) – [(Batch, Nsamples)]</p></li>
<li><p><strong>criterion</strong> (<em>str</em>) – one of (“si_snr”, “mse”, “corr)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>permutation for enh_wavs (Batch, num_spk)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>perm (torch.Tensor)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="espnet2.bin.enh_inference.SeparateSpeech.from_pretrained">
<em class="property">static </em><code class="sig-name descname">from_pretrained</code><span class="sig-paren">(</span><em class="sig-param">model_tag: Optional[str] = None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_inference.html#SeparateSpeech.from_pretrained"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_inference.SeparateSpeech.from_pretrained" title="Permalink to this definition">¶</a></dt>
<dd><p>Build SeparateSpeech instance from the pretrained model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model_tag</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Model tag of the pretrained models.
Currently, the tags of espnet_model_zoo are supported.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SeparateSpeech instance.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#espnet2.bin.enh_inference.SeparateSpeech" title="espnet2.bin.enh_inference.SeparateSpeech">SeparateSpeech</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="espnet2.bin.enh_inference.build_model_from_args_and_file">
<code class="sig-prename descclassname">espnet2.bin.enh_inference.</code><code class="sig-name descname">build_model_from_args_and_file</code><span class="sig-paren">(</span><em class="sig-param">task</em>, <em class="sig-param">args</em>, <em class="sig-param">model_file</em>, <em class="sig-param">device</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_inference.html#build_model_from_args_and_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_inference.build_model_from_args_and_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.enh_inference.get_parser">
<code class="sig-prename descclassname">espnet2.bin.enh_inference.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_inference.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_inference.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.enh_inference.get_train_config">
<code class="sig-prename descclassname">espnet2.bin.enh_inference.</code><code class="sig-name descname">get_train_config</code><span class="sig-paren">(</span><em class="sig-param">train_config</em>, <em class="sig-param">model_file=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_inference.html#get_train_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_inference.get_train_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.enh_inference.humanfriendly_or_none">
<code class="sig-prename descclassname">espnet2.bin.enh_inference.</code><code class="sig-name descname">humanfriendly_or_none</code><span class="sig-paren">(</span><em class="sig-param">value: str</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_inference.html#humanfriendly_or_none"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_inference.humanfriendly_or_none" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.enh_inference.inference">
<code class="sig-prename descclassname">espnet2.bin.enh_inference.</code><code class="sig-name descname">inference</code><span class="sig-paren">(</span><em class="sig-param">output_dir: str, batch_size: int, dtype: str, fs: int, ngpu: int, seed: int, num_workers: int, log_level: Union[int, str], data_path_and_name_and_type: Sequence[Tuple[str, str, str]], key_file: Optional[str], train_config: Optional[str], model_file: Optional[str], model_tag: Optional[str], inference_config: Optional[str], allow_variable_data_keys: bool, segment_size: Optional[float], hop_size: Optional[float], normalize_segment_scale: bool, show_progressbar: bool, ref_channel: Optional[int], normalize_output_wav: bool, enh_s2t_task: bool</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_inference.html#inference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_inference.inference" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.enh_inference.main">
<code class="sig-prename descclassname">espnet2.bin.enh_inference.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_inference.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_inference.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.enh_inference.recursive_dict_update">
<code class="sig-prename descclassname">espnet2.bin.enh_inference.</code><code class="sig-name descname">recursive_dict_update</code><span class="sig-paren">(</span><em class="sig-param">dict_org</em>, <em class="sig-param">dict_patch</em>, <em class="sig-param">verbose=False</em>, <em class="sig-param">log_prefix=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/enh_inference.html#recursive_dict_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.enh_inference.recursive_dict_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update <cite>dict_org</cite> with <cite>dict_patch</cite> in-place recursively.</p>
</dd></dl>

</section>
<section id="espnet2-bin-init">
<span id="id22"></span><h2>espnet2.bin.__init__<a class="headerlink" href="#espnet2-bin-init" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.__init__"></span></section>
<section id="espnet2-bin-tts-train">
<span id="id23"></span><h2>espnet2.bin.tts_train<a class="headerlink" href="#espnet2-bin-tts-train" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.tts_train"></span><dl class="function">
<dt id="espnet2.bin.tts_train.get_parser">
<code class="sig-prename descclassname">espnet2.bin.tts_train.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/tts_train.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.tts_train.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.tts_train.main">
<code class="sig-prename descclassname">espnet2.bin.tts_train.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/tts_train.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.tts_train.main" title="Permalink to this definition">¶</a></dt>
<dd><p>TTS training</p>
<p class="rubric">Example</p>
<p>% python tts_train.py asr –print_config –optim adadelta
% python tts_train.py –config conf/train_asr.yaml</p>
</dd></dl>

</section>
<section id="espnet2-bin-asr-inference">
<span id="id24"></span><h2>espnet2.bin.asr_inference<a class="headerlink" href="#espnet2-bin-asr-inference" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.asr_inference"></span><dl class="class">
<dt id="espnet2.bin.asr_inference.Speech2Text">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.asr_inference.</code><code class="sig-name descname">Speech2Text</code><span class="sig-paren">(</span><em class="sig-param">asr_train_config: Union[pathlib.Path, str] = None, asr_model_file: Union[pathlib.Path, str] = None, transducer_conf: dict = None, lm_train_config: Union[pathlib.Path, str] = None, lm_file: Union[pathlib.Path, str] = None, ngram_scorer: str = 'full', ngram_file: Union[pathlib.Path, str] = None, token_type: str = None, bpemodel: str = None, device: str = 'cpu', maxlenratio: float = 0.0, minlenratio: float = 0.0, batch_size: int = 1, dtype: str = 'float32', beam_size: int = 20, ctc_weight: float = 0.5, lm_weight: float = 1.0, ngram_weight: float = 0.9, penalty: float = 0.0, nbest: int = 1, streaming: bool = False, enh_s2t_task: bool = False, quantize_asr_model: bool = False, quantize_lm: bool = False, quantize_modules: List[str] = ['Linear'], quantize_dtype: str = 'qint8'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference.html#Speech2Text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference.Speech2Text" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Speech2Text class</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">soundfile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speech2text</span> <span class="o">=</span> <span class="n">Speech2Text</span><span class="p">(</span><span class="s2">&quot;asr_config.yml&quot;</span><span class="p">,</span> <span class="s2">&quot;asr.pth&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">audio</span><span class="p">,</span> <span class="n">rate</span> <span class="o">=</span> <span class="n">soundfile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;speech.wav&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speech2text</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>
<span class="go">[(text, token, token_int, hypothesis object), ...]</span>
</pre></div>
</div>
<dl class="method">
<dt id="espnet2.bin.asr_inference.Speech2Text.from_pretrained">
<em class="property">static </em><code class="sig-name descname">from_pretrained</code><span class="sig-paren">(</span><em class="sig-param">model_tag: Optional[str] = None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference.html#Speech2Text.from_pretrained"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference.Speech2Text.from_pretrained" title="Permalink to this definition">¶</a></dt>
<dd><p>Build Speech2Text instance from the pretrained model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model_tag</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Model tag of the pretrained models.
Currently, the tags of espnet_model_zoo are supported.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Speech2Text instance.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#espnet2.bin.asr_inference_maskctc.Speech2Text" title="espnet2.bin.asr_inference_maskctc.Speech2Text">Speech2Text</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="espnet2.bin.asr_inference.get_parser">
<code class="sig-prename descclassname">espnet2.bin.asr_inference.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.asr_inference.inference">
<code class="sig-prename descclassname">espnet2.bin.asr_inference.</code><code class="sig-name descname">inference</code><span class="sig-paren">(</span><em class="sig-param">output_dir: str, maxlenratio: float, minlenratio: float, batch_size: int, dtype: str, beam_size: int, ngpu: int, seed: int, ctc_weight: float, lm_weight: float, ngram_weight: float, penalty: float, nbest: int, num_workers: int, log_level: Union[int, str], data_path_and_name_and_type: Sequence[Tuple[str, str, str]], key_file: Optional[str], asr_train_config: Optional[str], asr_model_file: Optional[str], lm_train_config: Optional[str], lm_file: Optional[str], word_lm_train_config: Optional[str], word_lm_file: Optional[str], ngram_file: Optional[str], model_tag: Optional[str], token_type: Optional[str], bpemodel: Optional[str], allow_variable_data_keys: bool, transducer_conf: Optional[dict], streaming: bool, enh_s2t_task: bool, quantize_asr_model: bool, quantize_lm: bool, quantize_modules: List[str], quantize_dtype: str</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference.html#inference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference.inference" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.asr_inference.main">
<code class="sig-prename descclassname">espnet2.bin.asr_inference.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/asr_inference.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.asr_inference.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="espnet2-bin-tokenize-text">
<span id="id25"></span><h2>espnet2.bin.tokenize_text<a class="headerlink" href="#espnet2-bin-tokenize-text" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.tokenize_text"></span><dl class="function">
<dt id="espnet2.bin.tokenize_text.field2slice">
<code class="sig-prename descclassname">espnet2.bin.tokenize_text.</code><code class="sig-name descname">field2slice</code><span class="sig-paren">(</span><em class="sig-param">field: Optional[str]</em><span class="sig-paren">)</span> &#x2192; slice<a class="reference internal" href="../_modules/espnet2/bin/tokenize_text.html#field2slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.tokenize_text.field2slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert field string to slice</p>
<p>Note that field string accepts 1-based integer.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">field2slice</span><span class="p">(</span><span class="s2">&quot;1-&quot;</span><span class="p">)</span>
<span class="go">slice(0, None, None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field2slice</span><span class="p">(</span><span class="s2">&quot;1-3&quot;</span><span class="p">)</span>
<span class="go">slice(0, 3, None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field2slice</span><span class="p">(</span><span class="s2">&quot;-3&quot;</span><span class="p">)</span>
<span class="go">slice(None, 3, None)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="espnet2.bin.tokenize_text.get_parser">
<code class="sig-prename descclassname">espnet2.bin.tokenize_text.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; argparse.ArgumentParser<a class="reference internal" href="../_modules/espnet2/bin/tokenize_text.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.tokenize_text.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.tokenize_text.main">
<code class="sig-prename descclassname">espnet2.bin.tokenize_text.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/tokenize_text.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.tokenize_text.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.tokenize_text.tokenize">
<code class="sig-prename descclassname">espnet2.bin.tokenize_text.</code><code class="sig-name descname">tokenize</code><span class="sig-paren">(</span><em class="sig-param">input: str, output: str, field: Optional[str], delimiter: Optional[str], token_type: str, space_symbol: str, non_linguistic_symbols: Optional[str], bpemodel: Optional[str], log_level: str, write_vocabulary: bool, vocabulary_size: int, remove_non_linguistic_symbols: bool, cutoff: int, add_symbol: List[str], cleaner: Optional[str], g2p: Optional[str]</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/tokenize_text.html#tokenize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.tokenize_text.tokenize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="espnet2-bin-hubert-train">
<span id="id26"></span><h2>espnet2.bin.hubert_train<a class="headerlink" href="#espnet2-bin-hubert-train" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.hubert_train"></span><dl class="function">
<dt id="espnet2.bin.hubert_train.get_parser">
<code class="sig-prename descclassname">espnet2.bin.hubert_train.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/hubert_train.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.hubert_train.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.hubert_train.main">
<code class="sig-prename descclassname">espnet2.bin.hubert_train.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/hubert_train.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.hubert_train.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Hubert pretraining.</p>
<p class="rubric">Example</p>
<p>% python hubert_train.py asr –print_config –optim adadelta                 &gt; conf/hubert_asr.yaml
% python hubert_train.py –config conf/train_asr.yaml</p>
</dd></dl>

</section>
<section id="espnet2-bin-mt-train">
<span id="id27"></span><h2>espnet2.bin.mt_train<a class="headerlink" href="#espnet2-bin-mt-train" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.mt_train"></span><dl class="function">
<dt id="espnet2.bin.mt_train.get_parser">
<code class="sig-prename descclassname">espnet2.bin.mt_train.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/mt_train.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.mt_train.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.mt_train.main">
<code class="sig-prename descclassname">espnet2.bin.mt_train.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/mt_train.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.mt_train.main" title="Permalink to this definition">¶</a></dt>
<dd><p>MT training.</p>
<p class="rubric">Example</p>
<dl class="simple">
<dt>% python mt_train.py st –print_config –optim adadelta </dt><dd><p>&gt; conf/train_mt.yaml</p>
</dd>
</dl>
<p>% python mt_train.py –config conf/train_mt.yaml</p>
</dd></dl>

</section>
<section id="espnet2-bin-launch">
<span id="id28"></span><h2>espnet2.bin.launch<a class="headerlink" href="#espnet2-bin-launch" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.launch"></span><dl class="function">
<dt id="espnet2.bin.launch.get_parser">
<code class="sig-prename descclassname">espnet2.bin.launch.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/launch.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.launch.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.launch.main">
<code class="sig-prename descclassname">espnet2.bin.launch.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/launch.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.launch.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="espnet2-bin-st-inference">
<span id="id29"></span><h2>espnet2.bin.st_inference<a class="headerlink" href="#espnet2-bin-st-inference" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-espnet2.bin.st_inference"></span><dl class="class">
<dt id="espnet2.bin.st_inference.Speech2Text">
<em class="property">class </em><code class="sig-prename descclassname">espnet2.bin.st_inference.</code><code class="sig-name descname">Speech2Text</code><span class="sig-paren">(</span><em class="sig-param">st_train_config: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">st_model_file: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">lm_train_config: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">lm_file: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">ngram_scorer: str = 'full'</em>, <em class="sig-param">ngram_file: Union[pathlib.Path</em>, <em class="sig-param">str] = None</em>, <em class="sig-param">token_type: str = None</em>, <em class="sig-param">bpemodel: str = None</em>, <em class="sig-param">device: str = 'cpu'</em>, <em class="sig-param">maxlenratio: float = 0.0</em>, <em class="sig-param">minlenratio: float = 0.0</em>, <em class="sig-param">batch_size: int = 1</em>, <em class="sig-param">dtype: str = 'float32'</em>, <em class="sig-param">beam_size: int = 20</em>, <em class="sig-param">lm_weight: float = 1.0</em>, <em class="sig-param">ngram_weight: float = 0.9</em>, <em class="sig-param">penalty: float = 0.0</em>, <em class="sig-param">nbest: int = 1</em>, <em class="sig-param">enh_s2t_task: bool = False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_inference.html#Speech2Text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_inference.Speech2Text" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Speech2Text class</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">soundfile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speech2text</span> <span class="o">=</span> <span class="n">Speech2Text</span><span class="p">(</span><span class="s2">&quot;st_config.yml&quot;</span><span class="p">,</span> <span class="s2">&quot;st.pth&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">audio</span><span class="p">,</span> <span class="n">rate</span> <span class="o">=</span> <span class="n">soundfile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;speech.wav&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speech2text</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>
<span class="go">[(text, token, token_int, hypothesis object), ...]</span>
</pre></div>
</div>
<dl class="method">
<dt id="espnet2.bin.st_inference.Speech2Text.from_pretrained">
<em class="property">static </em><code class="sig-name descname">from_pretrained</code><span class="sig-paren">(</span><em class="sig-param">model_tag: Optional[str] = None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_inference.html#Speech2Text.from_pretrained"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_inference.Speech2Text.from_pretrained" title="Permalink to this definition">¶</a></dt>
<dd><p>Build Speech2Text instance from the pretrained model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model_tag</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Model tag of the pretrained models.
Currently, the tags of espnet_model_zoo are supported.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Speech2Text instance.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#espnet2.bin.asr_inference_maskctc.Speech2Text" title="espnet2.bin.asr_inference_maskctc.Speech2Text">Speech2Text</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="espnet2.bin.st_inference.get_parser">
<code class="sig-prename descclassname">espnet2.bin.st_inference.</code><code class="sig-name descname">get_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_inference.html#get_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_inference.get_parser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.st_inference.inference">
<code class="sig-prename descclassname">espnet2.bin.st_inference.</code><code class="sig-name descname">inference</code><span class="sig-paren">(</span><em class="sig-param">output_dir: str, maxlenratio: float, minlenratio: float, batch_size: int, dtype: str, beam_size: int, ngpu: int, seed: int, lm_weight: float, ngram_weight: float, penalty: float, nbest: int, num_workers: int, log_level: Union[int, str], data_path_and_name_and_type: Sequence[Tuple[str, str, str]], key_file: Optional[str], st_train_config: Optional[str], st_model_file: Optional[str], lm_train_config: Optional[str], lm_file: Optional[str], word_lm_train_config: Optional[str], word_lm_file: Optional[str], ngram_file: Optional[str], model_tag: Optional[str], token_type: Optional[str], bpemodel: Optional[str], allow_variable_data_keys: bool, enh_s2t_task: bool</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_inference.html#inference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_inference.inference" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="espnet2.bin.st_inference.main">
<code class="sig-prename descclassname">espnet2.bin.st_inference.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">cmd=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/espnet2/bin/st_inference.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#espnet2.bin.st_inference.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="espnet2.lm.html" class="btn btn-neutral float-left" title="espnet2.lm package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="espnet2.main_funcs.html" class="btn btn-neutral float-right" title="espnet2.main_funcs package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, Shinji Watanabe.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>